<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Betting Élite - Analyse du 13 Février 2026</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;600;700&family=Outfit:wght@300;400;500;600;700;800;900&display=swap');
        
        body { 
            font-family: 'Outfit', sans-serif; 
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1419 100%);
            color: #e2e8f0;
        }
        
        .mono { font-family: 'JetBrains Mono', monospace; }
        
        .glass { 
            background: rgba(15, 23, 42, 0.6); 
            backdrop-filter: blur(20px); 
            border: 1px solid rgba(148, 163, 184, 0.1); 
        }
        
        .card-gradient { 
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.98) 100%);
            border: 1px solid rgba(71, 85, 105, 0.2);
        }
        
        .ticket-banker { 
            background: linear-gradient(135deg, rgba(5, 46, 22, 0.5) 0%, rgba(2, 33, 11, 0.7) 100%); 
            border: 2px solid rgba(34, 197, 94, 0.3); 
        }
        
        .ticket-value { 
            background: linear-gradient(135deg, rgba(30, 58, 138, 0.5) 0%, rgba(17, 24, 39, 0.7) 100%); 
            border: 2px solid rgba(59, 130, 246, 0.3); 
        }
        
        .ticket-scoring { 
            background: linear-gradient(135deg, rgba(120, 53, 15, 0.5) 0%, rgba(69, 26, 3, 0.7) 100%); 
            border: 2px solid rgba(249, 115, 22, 0.3); 
        }
        
        .badge-safe { 
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 0 20px rgba(16, 185, 129, 0.4);
        }
        
        .badge-value { 
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
        }
        
        .badge-danger { 
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.4);
        }
        
        .badge-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
            box-shadow: 0 0 20px rgba(245, 158, 11, 0.4);
        }
        
        .league-tab.active { 
            border-bottom: 3px solid #3b82f6; 
            color: #60a5fa; 
            font-weight: 700;
        }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        .glow-effect {
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.3);
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in {
            animation: fadeInUp 0.5s ease-out forwards;
        }
        
        .stat-bar {
            transition: width 1s ease-out;
        }
        
        .nav-btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            color: #94a3b8;
            transition: all 0.2s;
        }
        .nav-btn.active {
            background: rgba(59, 130, 246, 0.15);
            color: #60a5fa;
        }
    </style>
</head>
<body class="min-h-screen pb-24">

    <!-- Header -->
    <header class="sticky top-0 z-50 glass px-4 md:px-6 py-2 border-b border-slate-700/50 shadow-2xl">
        <div class="max-w-7xl mx-auto flex justify-between items-center relative">
            <div class="flex items-center gap-3">
                <div class="bg-gradient-to-br from-blue-600 to-blue-800 p-2 rounded-lg shadow-lg glow-effect">
                    <i data-lucide="trending-up" class="text-white w-5 h-5"></i>
                </div>
                <div>
                    <h1 class="text-lg md:text-xl font-black tracking-tight">
                        BETTING <span class="text-blue-400">ÉLITE</span>
                    </h1>
                    <p id="header-date" class="text-xs text-slate-400 mono">Analyses du jour</p>
                </div>
            </div>
            
            <div id="nav-menu" class="hidden lg:flex flex-col lg:flex-row absolute lg:static top-full left-0 w-full lg:w-auto bg-[#0f172a] lg:bg-slate-800/50 p-4 lg:p-1 border-b lg:border border-slate-700/50 lg:rounded-xl gap-2 lg:gap-1 z-40 shadow-2xl lg:shadow-none">
                <button onclick="UI.router('dashboard')" id="nav-dashboard" class="nav-btn active text-sm w-full lg:w-auto text-left lg:text-center">Dashboard</button>
                <button onclick="UI.router('bankers')" id="nav-bankers" class="nav-btn text-sm w-full lg:w-auto text-left lg:text-center">Bankers Sûrs</button>
                <button onclick="UI.router('values')" id="nav-values" class="nav-btn text-sm w-full lg:w-auto text-left lg:text-center">Value Bets</button>
                <button onclick="UI.router('scoring')" id="nav-scoring" class="nav-btn text-sm w-full lg:w-auto text-left lg:text-center">Scoring</button>
                <button onclick="UI.router('traps')" id="nav-traps" class="nav-btn text-sm w-full lg:w-auto text-left lg:text-center">Pièges</button>
                <button onclick="UI.router('history')" id="nav-history" class="nav-btn text-sm w-full lg:w-auto text-left lg:text-center">Historique</button>
                <button onclick="UI.router('matches')" id="nav-matches" class="nav-btn text-sm w-full lg:w-auto text-left lg:text-center">Tous les Matchs</button>
            </div>

            <div class="flex items-center gap-4">
                <div class="glass px-4 py-2 rounded-full border border-green-500/30">
                    <span class="flex items-center gap-2 text-sm">
                        <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
                        <span class="mono font-semibold" id="header-count">Chargement...</span>
                    </span>
                </div>

                <button onclick="UI.toggleMenu()" class="lg:hidden bg-slate-800/80 p-2 rounded-lg border border-slate-700 text-blue-400 hover:bg-slate-700 transition-all">
                    <i data-lucide="menu" class="w-6 h-6"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 md:px-6 mt-8">

        <!-- VUE DASHBOARD -->
        <div id="view-dashboard">
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-10">
            <div onclick="UI.router('bankers')" class="glass p-6 rounded-2xl border-l-4 border-green-500 hover:scale-105 transition-transform cursor-pointer">
                <div class="flex items-center gap-3 mb-2">
                    <i data-lucide="shield-check" class="text-green-400 w-5 h-5"></i>
                    <p class="text-slate-400 text-xs font-bold uppercase tracking-wider">Banker Sûr</p>
                </div>
                <h3 id="kpi-banker" class="text-3xl font-black text-green-400 mono">-</h3>
                <p class="text-xs text-slate-500 mt-1">Probabilité &gt; 70%</p>
            </div>
            
            <div onclick="UI.router('values')" class="glass p-6 rounded-2xl border-l-4 border-blue-500 hover:scale-105 transition-transform cursor-pointer">
                <div class="flex items-center gap-3 mb-2">
                    <i data-lucide="target" class="text-blue-400 w-5 h-5"></i>
                    <p class="text-slate-400 text-xs font-bold uppercase tracking-wider">Top Value</p>
                </div>
                <h3 id="kpi-value" class="text-3xl font-black text-blue-400 mono">-</h3>
                <p class="text-xs text-slate-500 mt-1">Cotes sous-évaluées</p>
            </div>
            
            <div onclick="UI.router('scoring')" class="glass p-6 rounded-2xl border-l-4 border-orange-500 hover:scale-105 transition-transform cursor-pointer">
                <div class="flex items-center gap-3 mb-2">
                    <i data-lucide="flame" class="text-orange-400 w-5 h-5"></i>
                    <p class="text-slate-400 text-xs font-bold uppercase tracking-wider">Scoring</p>
                </div>
                <h3 id="kpi-scoring" class="text-3xl font-black text-orange-400 mono">-</h3>
                <p class="text-xs text-slate-500 mt-1">BTTS / Over 1.5</p>
            </div>
            
            <div onclick="UI.router('traps')" class="glass p-6 rounded-2xl border-l-4 border-red-500 hover:scale-105 transition-transform cursor-pointer">
                <div class="flex items-center gap-3 mb-2">
                    <i data-lucide="alert-triangle" class="text-red-400 w-5 h-5"></i>
                    <p class="text-slate-400 text-xs font-bold uppercase tracking-wider">Pièges</p>
                </div>
                <h3 id="kpi-trap" class="text-3xl font-black text-red-400 mono">-</h3>
                <p class="text-xs text-slate-500 mt-1">À éviter absolument</p>
            </div>
        </div>

        
        <section class="mb-12">
            <div class="flex items-center gap-3 mb-6">
                <i data-lucide="clipboard-check" class="text-blue-400 w-6 h-6"></i>
                <h2 class="text-2xl font-black">TICKETS ALGORITHMIQUES</h2>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                
                <div onclick="UI.router('bankers')" class="ticket-banker rounded-3xl p-6 hover:scale-105 transition-transform cursor-pointer">
                    <div class="flex justify-between items-center mb-5 pb-4 border-b border-green-500/20">
                        <h3 class="font-black text-green-400 flex items-center gap-2 text-lg">
                            <i data-lucide="lock" class="w-5 h-5"></i> 
                            BÉTON / CONFIANCE
                        </h3>
                        <span class="text-xs bg-green-900/50 text-green-300 px-3 py-1 rounded-full mono font-bold">10/10</span>
                    </div>
                    <ul id="ticket-banker-list" class="space-y-3 text-sm mb-6"></ul>
                </div>

                <div onclick="UI.router('values')" class="ticket-value rounded-3xl p-6 hover:scale-105 transition-transform cursor-pointer">
                    <div class="flex justify-between items-center mb-5 pb-4 border-b border-blue-500/20">
                        <h3 class="font-black text-blue-400 flex items-center gap-2 text-lg">
                            <i data-lucide="trending-up" class="w-5 h-5"></i> 
                            VALUE / CONTRE L'IA
                        </h3>
                        <span class="text-xs bg-blue-900/50 text-blue-300 px-3 py-1 rounded-full mono font-bold">ROI+</span>
                    </div>
                    <ul id="ticket-value-list" class="space-y-3 text-sm mb-6"></ul>
                </div>

                <div onclick="UI.router('scoring')" class="ticket-scoring rounded-3xl p-6 hover:scale-105 transition-transform cursor-pointer">
                    <div class="flex justify-between items-center mb-5 pb-4 border-b border-orange-500/20">
                        <h3 class="font-black text-orange-400 flex items-center gap-2 text-lg">
                            <i data-lucide="zap" class="w-5 h-5"></i> 
                            GOALS & BTTS
                        </h3>
                        <span class="text-xs bg-orange-900/50 text-orange-300 px-3 py-1 rounded-full mono font-bold">FUN</span>
                    </div>
                    <ul id="ticket-scoring-list" class="space-y-3 text-sm mb-6"></ul>
                </div>

            </div>
        </section>
        </div>

        <!-- VUE BANKERS -->
        <div id="view-bankers" style="display: none;">
            <div class="mb-6">
                <h2 class="text-2xl font-black flex items-center gap-3 text-green-400"><i data-lucide="shield-check"></i> BANKERS SÛRS</h2>
                <p class="text-slate-400 mt-2">Sélection haute fiabilité (Probabilité >= 80% ou Écart Rating >= 60)</p>
            </div>
            <div id="banker-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            </div>
        </div>

        <!-- VUE VALUE BETS -->
        <div id="view-values" style="display: none;">
            <div class="mb-6">
                <h2 class="text-2xl font-black flex items-center gap-3 text-blue-400"><i data-lucide="trending-up"></i> VALUE BETS</h2>
                <p class="text-slate-400 mt-2">Paris où l'IA détecte une erreur de cote du marché (ROI+)</p>
            </div>
            <div id="value-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            </div>
        </div>

        <!-- VUE SCORING -->
        <div id="view-scoring" style="display: none;">
            <div class="mb-6">
                <h2 class="text-2xl font-black flex items-center gap-3 text-orange-400"><i data-lucide="zap"></i> SCORING & BTTS</h2>
                <p class="text-slate-400 mt-2">Matchs ouverts avec forte probabilité de buts</p>
            </div>
            <div id="scoring-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            </div>
        </div>

        <!-- VUE PIÈGES -->
        <div id="view-traps" style="display: none;">
            <div class="mb-6">
                <h2 class="text-2xl font-black flex items-center gap-3 text-red-400"><i data-lucide="alert-triangle"></i> PIÈGES À ÉVITER</h2>
                <p class="text-slate-400 mt-2">Matchs risqués ou fausses bonnes idées identifiées par l'IA</p>
            </div>
            <div id="trap-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8">
            </div>
        </div>

        <!-- VUE HISTORIQUE -->
        <div id="view-history" style="display: none;">
            <div class="mb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                <div>
                    <h2 class="text-2xl font-black flex items-center gap-3 text-purple-400"><i data-lucide="history" class="w-6 h-6"></i> HISTORIQUE</h2>
                    <p class="text-slate-400 mt-2">Résultats des pronostics précédents</p>
                </div>
                <div class="bg-slate-800/50 p-1 rounded-lg border border-slate-700/50 flex items-center">
                    <button onclick="UI.changeHistoryDate('prev')" class="p-2 hover:bg-slate-700 rounded-md text-slate-400 transition-colors"><i data-lucide="chevron-left" class="w-4 h-4"></i></button>
                    <span id="history-date-display" class="mx-4 font-mono text-sm font-bold text-blue-400 min-w-[60px] text-center">...</span>
                    <button onclick="UI.changeHistoryDate('next')" class="p-2 hover:bg-slate-700 rounded-md text-slate-400 transition-colors"><i data-lucide="chevron-right" class="w-4 h-4"></i></button>
                </div>
            </div>
            
            <div id="history-content" class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <!-- Injecté via JS -->
            </div>
        </div>

        <!-- VUE MATCHS -->
        <div id="leagues-placeholder"></div>

    </main>
    <script src="matches.js"></script>
    <script src="history.js"></script>
    <script src="leagues.js"></script>
    <script>

        // --- 1. CONFIGURATION & UTILS ---
        const Config = {
            date: new Date().toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long', year: 'numeric' })
        };
        // Capitalize date
        Config.date = Config.date.charAt(0).toUpperCase() + Config.date.slice(1);

        const Utils = {
            getProb: (str) => parseInt(str.replace('%', '')),
            
            getGap: (rating) => {
                const [h, a] = rating.split('/').map(Number);
                return Math.abs(h - a);
            },

            analyzePower: (m) => {
                const [h, a] = m.rating.split('/').map(Number);
                const gap = Math.abs(h - a);
                const prob = Utils.getProb(m.prob);
                
                let score = prob;
                // CRITÈRE 1: Puissance Structurelle (Gap > 40)
                if (gap >= 40) score += 20; 
                else if (gap >= 25) score += 10;
                // CRITÈRE 2: Bonus Mismatch (Attaque vs Défense)
                if (m.logic.toLowerCase().includes('défense') && m.logic.toLowerCase().includes('attaque')) {
                    score += 5; 
                }
                // CRITÈRE 3: Bonus Bête Noire (H2H)
                if (m.logic.includes('H2H') && (m.logic.includes('8') || m.logic.includes('9'))) {
                    score += 15;
                }
                return score;
            },
            
            formatBet: (m) => {
                let text = m.bet;
                if (text.includes(m.home)) text = text.replace(m.home, `<strong>${m.home}</strong>`);
                else if (text.includes(m.away)) text = text.replace(m.away, `<strong>${m.away}</strong>`);
                else text = `<strong>${m.home}</strong> - ${text}`;
                return text;
            },

            checkMinGoals: (scoreStr, minGoals) => {
                if (!scoreStr) return false;
                const matches = scoreStr.match(/\d+-\d+/g);
                if (!matches) return false;
                return matches.every(s => {
                    const parts = s.split('-');
                    const total = parseInt(parts[0]) + parseInt(parts[1]);
                    return total >= minGoals;
                });
            }
        };

        // Gestion des dates pour l'historique
        const availableDates = historyData.map(h => h.date);
        let currentHistoryDateIndex = 0;

        // --- 2. LOGIQUE MÉTIER (TICKETS) ---
        const Logic = {
            // Filtres de base (retournent tous les matchs correspondants)
            filterBankers: () => {
                 return matches.filter(m => m.color !== 'badge-value' && (Utils.getProb(m.prob) >= 80 || Utils.getGap(m.rating) >= 60))
                               .sort((a, b) => Utils.analyzePower(b) - Utils.analyzePower(a));
            },
            filterValues: () => {
                 return matches.filter(m => {
                        if (m.color === 'badge-value') return true;
                        const [h, a] = m.rating.split('/').map(Number);
                        const gap = Math.abs(h - a);
                        const prob = Utils.getProb(m.prob);
                        return gap > 20 && prob < 60; 
                    })
                    .sort((a, b) => {
                        const getGap = (r) => {
                            const [h, a] = r.split('/').map(Number);
                            return Math.abs(h - a);
                        };
                        return getGap(b.rating) - getGap(a.rating);
                    });
            },
            filterScorings: () => {
                 return matches.filter(m => {
                        if (!Utils.checkMinGoals(m.score, 2)) return false;
                        const b = m.bet.toLowerCase();
                        const l = m.logic.toLowerCase();
                        const score = m.score || "";
                        const isGoalBet = b.includes('over') || b.includes('btts') || b.includes('buts') || b.includes('les deux') || b.includes('+');
                        const highPotential = (l.includes('défense') && l.includes('%')) || l.includes('xg') || score.includes('3-') || score.includes('4-') || score.includes('2-2');
                        return isGoalBet || highPotential;
                    })
                    .sort((a, b) => {
                        const probA = Utils.getProb(a.prob);
                        const probB = Utils.getProb(b.prob);
                        let scoreA = probA;
                        let scoreB = probB;
                        if (a.bet.toLowerCase().includes('btts') || a.bet.toLowerCase().includes('les deux')) scoreA += 5;
                        if (b.bet.toLowerCase().includes('btts') || b.bet.toLowerCase().includes('les deux')) scoreB += 5;
                        const offensiveLeagues = ['NED', 'BEL', 'GER', 'SUI', 'SCO'];
                        if (offensiveLeagues.includes(a.league)) scoreA += 4;
                        if (offensiveLeagues.includes(b.league)) scoreB += 4;
                        return scoreB - scoreA;
                    });
            },
            filterTraps: () => {
                return matches.filter(m => {
                    const isExplicitTrap = m.color === 'badge-warning' || m.color === 'badge-danger';
                    const trapText = m.trap ? m.trap.toLowerCase() : "";
                    const keywords = ["attention", "piège", "ne pas se fier", "trompeur", "danger", "risque"];
                    const hasTrapKeywords = keywords.some(k => trapText.includes(k));
                    const hasContent = m.trap && m.trap.length > 10 && !m.trap.includes("Aucun");
                    return isExplicitTrap || (hasTrapKeywords && hasContent);
                })
                .sort((a, b) => Utils.getProb(b.prob) - Utils.getProb(a.prob));
            },

            // Getters pour les Tickets (Top 10)
            getBankers: () => Logic.filterBankers().slice(0, 10),
            getValues: () => Logic.filterValues().slice(0, 10),
            getScorings: () => Logic.filterScorings().slice(0, 10),
            getTraps: () => Logic.filterTraps().slice(0, 10)
        };

        // --- 3. UI RENDERERS ---
        const UI = {
            toggleMenu: () => {
                const menu = document.getElementById('nav-menu');
                menu.classList.toggle('hidden');
                menu.classList.toggle('flex');
            },

            router: (viewName) => {
                const views = ['dashboard', 'matches', 'bankers', 'values', 'scoring', 'traps', 'history'];
                views.forEach(v => {
                    document.getElementById(`view-${v}`).style.display = v === viewName ? 'block' : 'none';
                    const btn = document.getElementById(`nav-${v}`);
                    if(btn) btn.classList.toggle('active', v === viewName);
                });

                // Fermer le menu sur mobile après clic
                const menu = document.getElementById('nav-menu');
                if (window.innerWidth < 1024 && menu.classList.contains('flex')) {
                    UI.toggleMenu();
                }
                
                // Scroll top
                window.scrollTo(0, 0);
            },

            updateKPIs: () => {
                const setKpi = (id, count) => {
                    const el = document.getElementById(id);
                    if (el) el.innerText = count;
                };

                setKpi('kpi-banker', Logic.filterBankers().length);
                setKpi('kpi-value', Logic.filterValues().length);
                setKpi('kpi-scoring', Logic.filterScorings().length);
                setKpi('kpi-trap', Logic.filterTraps().length);
            },

            renderTickets: () => {
                const inject = (list, id, color) => {
                    const el = document.getElementById(id);
                    if(!el) return;
                    el.innerHTML = list.map((m, i) => `
                        <li class="flex items-start gap-2 mb-2 p-2 rounded-lg hover:bg-white/5 transition-colors">
                            <span class="${color} mono font-bold shrink-0 mt-0.5">${i + 1}.</span>
                            <div class="flex flex-col w-full">
                                <span class="text-sm">${Utils.formatBet(m)}</span>
                                <div class="flex justify-between items-center mt-1">
                                    <span class="text-[10px] text-slate-400 opacity-80 mono">Confiance: ${m.prob}</span>
                                    <span class="text-[10px] bg-slate-800 px-1.5 rounded text-slate-300 mono">Rating: ${m.rating}</span>
                                </div>
                            </div>
                        </li>
                    `).join('');
                };

                inject(Logic.getBankers(), 'ticket-banker-list', 'text-green-400');
                inject(Logic.getValues(), 'ticket-value-list', 'text-blue-400');
                inject(Logic.getScorings(), 'ticket-scoring-list', 'text-orange-400');
            },

            createMatchCard: (match, index) => {
                const ratingParts = match.rating.split('/');
                const homeRating = parseInt(ratingParts[0]);
                const awayRating = parseInt(ratingParts[1]);
                
                return `
                    <div class="card-gradient rounded-3xl p-6 hover:border-blue-500/50 transition-all duration-300 hover:scale-[1.02] animate-fade-in" style="animation-delay: ${index * 0.05}s;">
                        
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex-1">
                                <span class="text-[10px] font-black text-slate-500 uppercase tracking-widest mb-1 block mono">
                                    ${match.leagueFull}
                                </span>
                                <h3 class="text-base font-bold leading-tight">
                                    <span class="text-white">${match.home}</span>
                                    <span class="text-slate-600 font-normal mx-1">vs</span>
                                    <span class="text-slate-300">${match.away}</span>
                                </h3>
                            </div>
                            <div class="text-right ml-3">
                                <span class="px-3 py-1.5 ${match.color} rounded-lg text-[10px] font-black uppercase tracking-tight shadow-lg">
                                    ${match.prob}
                                </span>
                            </div>
                        </div>

                        <div class="bg-gradient-to-br from-slate-900/60 to-slate-800/40 rounded-2xl p-4 border border-slate-700/30 mb-4 shadow-inner">
                            <div class="flex items-center gap-2 mb-2 text-blue-400">
                                <i data-lucide="crosshair" class="w-4 h-4"></i>
                                <span class="text-[10px] font-bold uppercase tracking-widest">Conseil Pro</span>
                            </div>
                            <p class="text-base font-bold text-white mb-1.5">${match.bet}</p>
                            <p class="text-[11px] text-slate-400 italic leading-tight">"${match.scenario}"</p>
                        </div>

                        <div class="space-y-2 mb-4">
                            <div class="flex justify-between text-[11px] mono">
                                <span class="text-slate-400 uppercase tracking-tight">Power Rating</span>
                                <span class="font-bold"><span class="text-blue-400">${homeRating}</span><span class="text-slate-600">/</span><span class="text-red-400">${awayRating}</span></span>
                            </div>
                            <div class="w-full bg-slate-800/50 h-2 rounded-full overflow-hidden flex border border-slate-700/30">
                                <div class="stat-bar bg-gradient-to-r from-blue-600 to-blue-500 h-full" style="width: ${homeRating}%"></div>
                                <div class="stat-bar bg-gradient-to-r from-red-500 to-red-600 h-full" style="width: ${awayRating}%"></div>
                            </div>
                        </div>

                        <div class="flex items-start gap-2 pt-3 border-t border-slate-700/30 mb-4">
                            <i data-lucide="cpu" class="w-4 h-4 text-slate-500 mt-0.5 shrink-0"></i>
                            <p class="text-[11px] text-slate-400 leading-snug">${match.logic}</p>
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div class="bg-gradient-to-br from-red-950/30 to-red-900/20 border border-red-800/30 rounded-xl p-3">
                                <div class="flex items-center gap-1.5 mb-1.5 text-red-400">
                                    <i data-lucide="shield-alert" class="w-3.5 h-3.5"></i>
                                    <span class="text-[9px] font-bold uppercase tracking-wide">Piège</span>
                                </div>
                                <p class="text-[10px] text-red-200 leading-tight">${match.trap}</p>
                            </div>
                            <div class="bg-gradient-to-br from-slate-800/70 to-slate-700/50 border border-slate-600/30 rounded-xl p-3 text-center flex flex-col justify-center">
                                <span class="text-[9px] text-slate-400 uppercase font-bold mb-1 tracking-wide">Score Visé</span>
                                <p class="text-sm font-black text-white mono">${match.score}</p>
                            </div>
                        </div>

                    </div>
                `;
            },

            renderBankers: () => {
                const grid = document.getElementById('banker-grid');
                if(!grid) return;
                grid.innerHTML = '';
                
                const bankers = Logic.filterBankers();
                
                if (bankers.length === 0) {
                    grid.innerHTML = `<div class="col-span-full text-center py-10 text-slate-500 italic">Aucun banker trouvé.</div>`;
                    return;
                }

                bankers.forEach((match, index) => {
                    grid.innerHTML += UI.createMatchCard(match, index);
                });
                lucide.createIcons();
            },

            renderValues: () => {
                const grid = document.getElementById('value-grid');
                if(!grid) return;
                grid.innerHTML = '';
                
                const values = Logic.filterValues();
                
                if (values.length === 0) {
                    grid.innerHTML = `<div class="col-span-full flex flex-col items-center justify-center py-12 text-slate-500 opacity-60">
                        <i data-lucide="trending-up" class="w-12 h-12 mb-4"></i>
                        <p class="text-sm font-medium">Aucune opportunité "Value" majeure détectée.</p>
                    </div>`;
                    lucide.createIcons();
                    return;
                }

                values.forEach((match, index) => {
                    // On utilise le composant de carte standard
                    grid.innerHTML += UI.createMatchCard(match, index);
                });
                
                lucide.createIcons();
            },

            renderScoring: () => {
                const grid = document.getElementById('scoring-grid');
                if(!grid) return;
                grid.innerHTML = '';
                
                const scorings = Logic.filterScorings();
                
                if (scorings.length === 0) {
                    grid.innerHTML = `<div class="col-span-full flex flex-col items-center justify-center py-12 text-slate-500 opacity-60">
                        <i data-lucide="goal" class="w-12 h-12 mb-4"></i>
                        <p class="text-sm font-medium">Aucun festival de buts détecté aujourd'hui.</p>
                    </div>`;
                    lucide.createIcons();
                    return;
                }

                scorings.forEach((match, index) => {
                    grid.innerHTML += UI.createMatchCard(match, index);
                });
                
                lucide.createIcons();
            },

            renderTraps: () => {
                const grid = document.getElementById('trap-grid');
                if(!grid) return;
                grid.innerHTML = '';
                
                const traps = Logic.filterTraps();
                
                if (traps.length === 0) {
                    grid.innerHTML = `<div class="col-span-full text-center py-10 text-slate-500 italic">Aucun piège majeur détecté aujourd'hui.</div>`;
                    return;
                }

                traps.forEach((match, index) => {
                    // On force l'affichage en mode "Alerte" visuelle pour la grille des pièges
                    // en modifiant temporairement la couleur pour le rendu, ou en gardant la carte standard
                    grid.innerHTML += UI.createMatchCard(match, index);
                });
                
                lucide.createIcons();
            },

            changeHistoryDate: (direction) => {
                if (direction === 'prev') {
                    if (currentHistoryDateIndex < availableDates.length - 1) currentHistoryDateIndex++;
                } else {
                    if (currentHistoryDateIndex > 0) currentHistoryDateIndex--;
                }
                UI.renderHistory();
            },

            renderHistory: () => {
                const dateDisplay = document.getElementById('history-date-display');
                const currentDate = availableDates[currentHistoryDateIndex];
                if (dateDisplay) dateDisplay.innerText = currentDate;
                
                const container = document.getElementById('history-content');
                if (!container) return;
                
                const dayData = historyData.find(h => h.date === currentDate);
                
                if (!dayData) {
                    container.innerHTML = `<div class="col-span-full text-center py-10 text-slate-500 italic">Aucune donnée pour cette date.</div>`;
                    return;
                }

                const createTicketCard = (title, ticketData, colorClass, icon) => {
                    const matches = ticketData.matches;
                    const totalOdds = ticketData.totalOdds;
                    const isWin = matches.every(m => m.status === 'WIN');
                    const statusColor = isWin ? 'text-green-400' : 'text-red-400';
                    const statusBg = isWin ? 'bg-green-500/20' : 'bg-red-500/20';
                    const statusText = isWin ? 'GAGNÉ' : 'PERDU';
                    const borderClass = isWin ? 'border-green-500/30' : 'border-red-500/30';

                    return `
                    <div class="rounded-3xl p-6 border ${borderClass} bg-slate-800/40 relative overflow-hidden">
                        <div class="absolute top-0 right-0 p-4">
                            <span class="px-3 py-1 rounded-full text-xs font-bold ${statusBg} ${statusColor}">${statusText}</span>
                        </div>
                        <div class="flex items-center gap-2 mb-4 ${colorClass}">
                            <i data-lucide="${icon}" class="w-5 h-5"></i>
                            <h3 class="font-black text-lg">${title}</h3>
                        </div>
                        <ul class="space-y-3">
                            ${matches.map(m => `
                                <li class="flex justify-between items-start text-sm border-b border-slate-700/50 pb-2 last:border-0">
                                    <div class="flex flex-col">
                                        <span class="font-bold text-white">${m.match}</span>
                                        <span class="text-xs text-slate-400">${m.bet}</span>
                                    </div>
                                    <div class="text-right">
                                        <span class="block font-mono font-bold text-white">${m.score}</span>
                                        <span class="text-[10px] font-bold ${m.status === 'WIN' ? 'text-green-400' : 'text-red-400'}">${m.status === 'WIN' ? '✔' : '✘'}</span>
                                    </div>
                                </li>
                            `).join('')}
                        </ul>
                        <div class="mt-4 pt-3 border-t border-slate-700/50 flex justify-between items-center">
                            <span class="text-xs text-slate-400 font-bold uppercase tracking-wider">Cote Totale</span>
                            <span class="font-mono font-black text-xl text-white bg-slate-900/50 px-3 py-1 rounded-lg border border-slate-700/50">${totalOdds}</span>
                        </div>
                    </div>
                    `;
                };

                container.innerHTML = `
                    ${createTicketCard('BANKER', dayData.tickets.banker, 'text-green-400', 'lock')}
                    ${createTicketCard('VALUE', dayData.tickets.value, 'text-blue-400', 'trending-up')}
                    ${createTicketCard('SCORING', dayData.tickets.scoring, 'text-orange-400', 'zap')}
                `;
                
                lucide.createIcons();
            },

            renderMatches: (filter = 'all') => {
                const grid = document.getElementById('match-grid');
                grid.innerHTML = '';
                
                // Filtrage simplifié grâce aux codes pays harmonisés
                const filtered = filter === 'all' 
                    ? matches 
                    : matches.filter(m => m.league === filter);
                
                if (filtered.length === 0) {
                    grid.innerHTML = `<div class="col-span-full text-center py-10 text-slate-500 italic">Aucun match trouvé pour ce filtre.</div>`;
                    return;
                }

                filtered.forEach((match, index) => {
                    grid.innerHTML += UI.createMatchCard(match, index);
                });
                
                lucide.createIcons();
            }
        };

        // --- 4. EVENTS & INIT ---
        function filterLeague(league) {
            document.querySelectorAll('.league-tab').forEach(tab => {
                tab.classList.remove('active', 'text-blue-400');
                tab.classList.add('text-slate-500');
            });
            const activeTab = document.getElementById(`tab-${league}`);
            if(activeTab) {
                activeTab.classList.add('active', 'text-blue-400');
                activeTab.classList.remove('text-slate-500');
            }
            UI.renderMatches(league);
        }

        // Initialize
        window.onload = () => {
            document.title = `Dashboard Betting Élite - Analyse du ${Config.date}`;
            const dateEl = document.getElementById('header-date');
            if (dateEl) dateEl.innerText = `Analyses du ${Config.date}`;
            const countEl = document.getElementById('header-count');
            if (countEl) countEl.innerText = `${matches.length} Matchs analysés`;

            const placeholder = document.getElementById('leagues-placeholder');
            if(placeholder) placeholder.outerHTML = LEAGUES_HTML;

            UI.renderMatches();
            UI.renderTickets();
            UI.renderBankers();
            UI.renderValues();
            UI.renderScoring();
            UI.renderTraps();
            UI.renderHistory();
            UI.updateKPIs();
            lucide.createIcons();
        };
    </script>
</body>
</html>